{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"A dashboard to show EKS container logs","editable":false,"gnetId":null,"graphTooltip":1,"hideControls":false,"id":null,"links":[{"asDropdown":true,"icon":"external link","includeVars":false,"keepTime":false,"tags":[],"targetBlank":"true","title":"LogQL Reference","type":"link","url":"https://grafana.com/docs/loki/latest/logql/"}],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds_logs","fill":1,"fillGradient":0,"gridPos":{"h":5,"w":24,"x":0,"y":0},"id":2,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(count_over_time({app_mintel_com_data_source=\"$cluster\",namespace=\"$namespace\",pod=\"$pod\"}$logql[5m])) by (level)","format":"time_series","intervalFactor":2,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Log events [5m]","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"datasource":"$ds_logs","gridPos":{"h":15,"w":24,"x":5,"y":0},"id":3,"options":{"showLabels":false,"showTime":true,"sortOrder":"Descending","wrapLogMessage":true},"span":12,"targets":[{"expr":"{app_mintel_com_data_source=\"$cluster\",namespace=\"$namespace\",pod=\"$pod\"}$logql","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Logs","type":"logs"}],"refresh":"","rows":[],"schemaVersion":14,"style":"dark","tags":["mintel","eks","loki","logs","qa"],"templating":{"list":[{"current":{"text":"loki-eks-qa","value":"loki-eks-qa"},"hide":2,"label":null,"name":"ds_logs","options":[],"query":"loki","refresh":1,"regex":"","type":"datasource"},{"current":{"text":"cortex-eks-qa","value":"cortex-eks-qa"},"hide":2,"label":null,"name":"ds_metrics","options":[],"query":"prometheus","refresh":1,"regex":"","type":"datasource"},{"allValue":null,"current":{},"datasource":"$ds_logs","hide":0,"includeAll":false,"label":null,"multi":false,"name":"cluster","options":[],"query":"label_values(app_mintel_com_data_source)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"$ds_metrics","hide":0,"includeAll":false,"label":null,"multi":false,"name":"namespace","options":[],"query":"label_values(kube_pod_container_info{app_mintel_com_data_source=\"$cluster\"}, namespace)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"$ds_metrics","hide":0,"includeAll":false,"label":null,"multi":false,"name":"workload","options":[],"query":"label_values(kube_pod_labels{app_mintel_com_data_source=\"$cluster\",namespace=\"$namespace\"}, label_name)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"$ds_metrics","hide":0,"includeAll":false,"label":null,"multi":false,"name":"pod","options":[],"query":"label_values(kube_pod_labels{app_mintel_com_data_source=\"$cluster\",namespace=\"$namespace\",label_name=\"$workload\"},pod)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"","value":""},"label":"LogQL filter","name":"logql","query":"","type":"textbox"}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Mintel / EKS Logs (qa)","uid":"a0cbad6cfd7aff402db9f5eff8184876qa","version":0}
