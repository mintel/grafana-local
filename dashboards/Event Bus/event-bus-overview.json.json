{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"Provides an overview of the Mintel Event Bus","editable":false,"gnetId":null,"graphTooltip":1,"hideControls":false,"id":null,"links":[],"panels":[{"colorMaps":[{"color":"#E02F44","text":"down"},{"color":"#56A64B","text":"up"},{"color":"#F2CC0C","text":"multiple"}],"datasource":"$ds","decimals":0,"gridPos":{"h":4,"w":24,"x":0,"y":0},"id":2,"rangeMaps":[{"from":"2","text":"multiple","to":"99999"}],"targets":[{"datasource":"$ds","expr":"sum(up{namespace=\"mdp\", app_kubernetes_io_name=\"ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":""}],"title":"EBTailer Status","type":"natel-discrete-panel","units":"none","valueMaps":[{"op":"=","text":"down","value":"null"},{"op":"=","text":"down","value":"0"},{"op":"=","text":"up","value":"1"}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"This panel shows the rate of various kinds of problems with event bus messages:\n- `No Type Attribute`: The SQS message lacks a \"type\" attribute that says what message type it contains.\n- `Event Type Unknown to EBTailer - {{event_type}}` - The SQS message has a \"type\" attribute, but EBTailer wasn't compile with this Protobuf definition. EBTailer cannot validate the message contents.\n- `Deserialization Failed - {{event_type}}` - EBTailer was compiled with this Protobuf message type, but failed to deserialize the event message.\n\nNote: this panel isn't effected by the Topic/Event Type selectors at the top of the page.\n","fill":0,"fillGradient":0,"gridPos":{"h":10,"w":24,"x":0,"y":0},"id":3,"legend":{"alignAsTable":false,"avg":false,"current":false,"hideZero":true,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(rate(event_bus_ebtailer_messages_unknown_type_total[$__rate_interval]))","format":"time_series","intervalFactor":2,"legendFormat":"No Type Attribute","refId":"A"},{"datasource":"$ds","expr":"sum(rate(event_bus_ebtailer_events_total{known_to_ebtailer=\"false\"}[$__rate_interval])) by (event_type)","format":"time_series","intervalFactor":2,"legendFormat":"Event Type Unknown to EBTailer - {{event_type}}","refId":"B"},{"datasource":"$ds","expr":"sum(rate(event_bus_ebtailer_invalid_events_total[$__rate_interval])) by (event_type)","format":"time_series","intervalFactor":2,"legendFormat":"Deserialization Failed - {{event_type}}","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Message Problems","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"msg / sec","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"msg / sec","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"This includes any message EBTailer received with a \"type\" attribute, even ones it didn't have the Protobuf definition to deserialize the message with.\n","fill":0,"fillGradient":0,"gridPos":{"h":10,"w":24,"x":0,"y":0},"id":4,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(label_replace(rate(event_bus_ebtailer_events_total{event_type=~\"$event_type\"}[$__rate_interval]), \"topic\", \"$1\", \"event_type\", \"com\\\\.mintel\\\\.topics\\\\.(.*)\\\\.v\\\\d+\\\\..*\")) by (topic)","format":"time_series","intervalFactor":2,"legendFormat":"{{topic}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Event Rate by Topic","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"events / sec","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"events / sec","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"This includes any message EBTailer received with a \"type\" attribute, even ones it didn't have the Protobuf definition to deserialize the message with.\n","fill":0,"fillGradient":0,"gridPos":{"h":10,"w":24,"x":0,"y":0},"id":5,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(rate(event_bus_ebtailer_events_total{event_type=~\"$event_type\"}[$__rate_interval])) by (event_type)","format":"time_series","intervalFactor":2,"legendFormat":"{{event_type}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Event Rate by Event Type","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"events / sec","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"events / sec","label":null,"logBase":1,"max":null,"min":0,"show":true}]}],"refresh":"","rows":[{"collapse":true,"collapsed":true,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"Number of message published to the SNS topic.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":0,"fillGradient":0,"id":6,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(aws_sns_number_of_messages_published_sum{topic_name=~\"$topic\"})","format":"time_series","intervalFactor":2,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Messages Published","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"Number of notifications this SNS topic sent to its various subscribers.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":1,"fillGradient":0,"id":7,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":true,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(aws_sns_number_of_notifications_delivered_sum{topic_name=~\"$topic\"})","format":"time_series","intervalFactor":2,"legendFormat":"Delivered","refId":"A"},{"datasource":"$ds","expr":"sum(aws_sns_number_of_notifications_failed_sum{topic_name=~\"$topic\"})","format":"time_series","intervalFactor":2,"legendFormat":"Failed","refId":"B"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Notifications Sent to Subscribers","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"The size in bytes of messages that were published to this SNS topic.\n\nSNS has a max message size of 256 KB.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":1,"fillGradient":0,"id":8,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"max(aws_sns_publish_size_p50{topic_name=~\"$topic\"})","format":"time_series","intervalFactor":2,"legendFormat":"p50","refId":"A"},{"datasource":"$ds","expr":"max(aws_sns_publish_size_p90{topic_name=~\"$topic\"})","format":"time_series","intervalFactor":2,"legendFormat":"p90","refId":"B"},{"datasource":"$ds","expr":"max(aws_sns_publish_size_p95{topic_name=~\"$topic\"})","format":"time_series","intervalFactor":2,"legendFormat":"p95","refId":"C"},{"datasource":"$ds","expr":"max(aws_sns_publish_size_p99{topic_name=~\"$topic\"})","format":"time_series","intervalFactor":2,"legendFormat":"p99","refId":"D"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Published Message Size","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true}]}],"repeat":"topic","repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"SNS Topic: $topic","titleSize":"h6","type":"row"},{"collapse":true,"collapsed":true,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"Number of messages sent to, received from, and deleted from the SQS queue.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":0,"fillGradient":0,"id":9,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(aws_sqs_number_of_messages_sent_sum{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"Sent","refId":"A"},{"datasource":"$ds","expr":"sum(aws_sqs_number_of_messages_received_sum{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"Received","refId":"B"},{"datasource":"$ds","expr":"sum(aws_sqs_number_of_messages_deleted_sum{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"Deleted","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Messages I/O","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"The number of messages in the SQS queue.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":1,"fillGradient":0,"id":10,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":true,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(aws_sqs_approximate_number_of_messages_visible_sum{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"Visible","refId":"A"},{"datasource":"$ds","expr":"sum(aws_sqs_approximate_number_of_messages_not_visible_sum{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"Not Visible","refId":"B"},{"datasource":"$ds","expr":"sum(aws_sqs_approximate_number_of_messages_delayed_sum{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"Delayed","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Approximate Number of Messages in Queue","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"The approximate age of the oldest message in the queue.\n\nA value that isn't near zero can indicate the queue is not being processed or not being processed fast enough.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":1,"fillGradient":0,"id":11,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"max(aws_sqs_approximate_age_of_oldest_message_maximum{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"Age of Oldest Message","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Approximate Age of Oldest Message","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"Number of requests sent by clients to receive messages that returned an empty response.\n\nHigh values would suggest the clients aren't using [long polling](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html#sqs-long-polling).\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":0,"fillGradient":0,"id":12,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(aws_sqs_number_of_empty_receives_sum{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"Empty Receives","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Number of Empty Receives","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"The size of messages being sent to the SQS queue.\n\nSQS has a max message size of 256 KB.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":1,"fillGradient":0,"id":13,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"max(aws_sqs_sent_message_size_pp50{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"p50","refId":"A"},{"datasource":"$ds","expr":"max(aws_sqs_sent_message_size_pp90{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"p90","refId":"B"},{"datasource":"$ds","expr":"max(aws_sqs_sent_message_size_pp95{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"p95","refId":"C"},{"datasource":"$ds","expr":"max(aws_sqs_sent_message_size_pp99{queue_name=\"_all-ebtailer\"})","format":"time_series","intervalFactor":2,"legendFormat":"p99","refId":"D"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Sent Message Size","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"SQS Queue: _all-ebtailer","titleSize":"h6","type":"row"},{"collapse":true,"collapsed":true,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"Number of messages sent to, received from, and deleted from the SQS queue.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":0,"fillGradient":0,"id":14,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(aws_sqs_number_of_messages_sent_sum{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"Sent","refId":"A"},{"datasource":"$ds","expr":"sum(aws_sqs_number_of_messages_received_sum{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"Received","refId":"B"},{"datasource":"$ds","expr":"sum(aws_sqs_number_of_messages_deleted_sum{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"Deleted","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Messages I/O","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"The number of messages in the SQS queue.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":1,"fillGradient":0,"id":15,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":true,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(aws_sqs_approximate_number_of_messages_visible_sum{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"Visible","refId":"A"},{"datasource":"$ds","expr":"sum(aws_sqs_approximate_number_of_messages_not_visible_sum{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"Not Visible","refId":"B"},{"datasource":"$ds","expr":"sum(aws_sqs_approximate_number_of_messages_delayed_sum{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"Delayed","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Approximate Number of Messages in Queue","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"The approximate age of the oldest message in the queue.\n\nA value that isn't near zero can indicate the queue is not being processed or not being processed fast enough.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":1,"fillGradient":0,"id":16,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"max(aws_sqs_approximate_age_of_oldest_message_maximum{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"Age of Oldest Message","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Approximate Age of Oldest Message","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"Number of requests sent by clients to receive messages that returned an empty response.\n\nHigh values would suggest the clients aren't using [long polling](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html#sqs-long-polling).\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":0,"fillGradient":0,"id":17,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"sum(aws_sqs_number_of_empty_receives_sum{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"Empty Receives","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Number of Empty Receives","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$ds","description":"The size of messages being sent to the SQS queue.\n\nSQS has a max message size of 256 KB.\n\nNOTE: SNS/SQS metrics are delayed by [10 minutes](https://github.com/prometheus/cloudwatch_exporter#timestamps).\n","fill":1,"fillGradient":0,"id":18,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"datasource":"$ds","expr":"max(aws_sqs_sent_message_size_pp50{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"p50","refId":"A"},{"datasource":"$ds","expr":"max(aws_sqs_sent_message_size_pp90{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"p90","refId":"B"},{"datasource":"$ds","expr":"max(aws_sqs_sent_message_size_pp95{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"p95","refId":"C"},{"datasource":"$ds","expr":"max(aws_sqs_sent_message_size_pp99{queue_name=\"$queue\"})","format":"time_series","intervalFactor":2,"legendFormat":"p99","refId":"D"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Sent Message Size","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true}]}],"repeat":"queue","repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"SQS Queue: $queue","titleSize":"h6","type":"row"}],"schemaVersion":14,"style":"dark","tags":["mintel","event-bus"],"templating":{"list":[{"current":{"text":"cortex-satoshi-prod","value":"cortex-satoshi-prod"},"hide":0,"label":"datasource","name":"ds","options":[],"query":"prometheus","refresh":1,"regex":"/cortex-eks.*/","type":"datasource"},{"allValue":null,"current":{"text":"all","value":"$__all"},"datasource":"$ds","hide":0,"includeAll":true,"label":"Topic","multi":true,"name":"topic","options":[],"query":"label_values(aws_resource_info{job=\"aws_sns\", tag_MintelEventBus=\"true\"}, topic_name)","refresh":2,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"all","value":"$__all"},"datasource":"$ds","hide":2,"includeAll":true,"label":null,"multi":true,"name":"queue","options":[],"query":"label_values(aws_resource_info{job=\"aws_sqs\", tag_MintelEventBus=\"true\", tag_TopicName=~\"$topic\"}, queue_name)","refresh":2,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"all","value":"$__all"},"datasource":"$ds","hide":0,"includeAll":true,"label":"Event Type","multi":true,"name":"event_type","options":[],"query":"label_values({__name__=~\"event_bus_ebtailer_events_total|event_bus_ebtailer_invalid_events_total\", event_type=~\"com\\\\.mintel\\\\.topics\\\\.$topic\\\\.v\\\\d+\\\\..*\"}, event_type)","refresh":2,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Mintel /  Event Bus","uid":"7be0d89b4c9a688469af62378bdd8a77","version":0}
