{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"ElasticSearch cluster monitoring with ElasticSearch exporter","editable":true,"gnetId":9746,"graphTooltip":1,"id":109,"iteration":1615287683565,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":90,"panels":[],"title":"Cluster","type":"row"},{"cacheTimeout":null,"colorBackground":true,"colorPostfix":false,"colorPrefix":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":0,"y":1},"id":92,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"scalar(elasticsearch_cluster_health_status{instance=\"$any_master\",color=\"green\"}) + scalar(elasticsearch_cluster_health_status{instance=\"$any_master\",color=\"yellow\"}) * 2 + scalar(elasticsearch_cluster_health_status{instance=\"$any_master\",color=\"red\"}) * 3","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"2,3","title":"Cluster Status","type":"singlestat","valueFontSize":"120%","valueMaps":[{"op":"=","text":"N/A","value":"null"},{"op":"=","text":"green","value":"1"},{"op":"=","text":"yellow","value":"2"},{"op":"=","text":"red","value":"3"}],"valueName":"current"},{"cacheTimeout":null,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"percentage","steps":[{"color":"red","value":null},{"color":"green","value":100}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":3,"y":1},"id":8,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"vertical","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.4","targets":[{"expr":"sum(elasticsearch_cluster_health_number_of_nodes{instance=\"$any_master\"}) / count(elasticsearch_cluster_health_up) ","interval":"","legendFormat":"","refId":"B"}],"timeFrom":null,"timeShift":null,"title":"Running Nodes","type":"stat"},{"cacheTimeout":null,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":6,"y":1},"id":94,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.4","targets":[{"expr":"elasticsearch_cluster_health_number_of_data_nodes{instance=\"$any_master\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Active Data Nodes","type":"stat"},{"cacheTimeout":null,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":9,"y":1},"id":78,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.4","targets":[{"expr":"elasticsearch_cluster_health_active_shards{instance=\"$any_master\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Active Shards","type":"stat"},{"cacheTimeout":null,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":12,"y":1},"id":80,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.4","targets":[{"expr":"elasticsearch_cluster_health_active_primary_shards{instance=\"$any_master\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Active Primary Shards","type":"stat"},{"cacheTimeout":null,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.5},{"color":"#d44a3a","value":1}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":0,"y":4},"id":82,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.4","targets":[{"expr":"elasticsearch_cluster_health_initializing_shards{instance=\"$any_master\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Initializing Shards","type":"stat"},{"cacheTimeout":null,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.5},{"color":"#d44a3a","value":1}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":3,"y":4},"id":84,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.4","targets":[{"expr":"elasticsearch_cluster_health_relocating_shards{instance=\"$any_master\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Relocating Shards","type":"stat"},{"cacheTimeout":null,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.5},{"color":"#d44a3a","value":1}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":6,"y":4},"id":86,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.4","targets":[{"expr":"elasticsearch_cluster_health_unassigned_shards{instance=\"$any_master\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Unassigned Shards","type":"stat"},{"cacheTimeout":null,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.5},{"color":"#d44a3a","value":1}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":9,"y":4},"id":88,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.4","targets":[{"expr":"elasticsearch_cluster_health_delayed_unassigned_shards{instance=\"$any_master\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Delayed Unassigned Shards","type":"stat"},{"cacheTimeout":null,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.5},{"color":"#d44a3a","value":1}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":12,"y":4},"id":96,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.4","targets":[{"expr":"elasticsearch_cluster_health_number_of_pending_tasks{instance=\"$any_master\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Pending Tasks","type":"stat"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":7},"id":70,"panels":[],"title":"Documents - $instance","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":12,"x":0,"y":8},"hiddenSeries":false,"id":3,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(elasticsearch_indices_docs{app_mintel_com_site=\"$site\", instance=~\"$instance\"})","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Documents","refId":"A","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Documents indexed","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2136","format":"short","logBase":1,"max":null,"min":0,"show":true},{"$$hashKey":"object:2137","format":"short","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":12,"x":12,"y":8},"hiddenSeries":false,"id":4,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(elasticsearch_indices_store_size_bytes{app_mintel_com_site=\"$site\", instance=~\"$instance\"})","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Index Size","refId":"A","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Index Size","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2215","format":"bytes","logBase":1,"max":null,"min":0,"show":true},{"$$hashKey":"object:2216","format":"short","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":16},"hiddenSeries":false,"id":72,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(elasticsearch_indices_indexing_index_total{app_mintel_com_site=\"$site\", instance=~\"$instance\"}[1h])","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{name}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Documents Indexed Rate","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2371","format":"short","label":"Documents/s","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2372","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":16},"hiddenSeries":false,"id":74,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(elasticsearch_indices_search_fetch_total{app_mintel_com_site=\"$site\", instance=~\"$instance\"}[1h])","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{name}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Query Rate","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2450","format":"short","label":"Queris/s","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2451","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":24,"x":0,"y":24},"height":"","hiddenSeries":false,"id":64,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(elasticsearch_thread_pool_queue_count{app_mintel_com_site=\"$site\", instance=~\"$instance\", type!=\"management\"}) by (type)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Type: {{type}}","refId":"A","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Queue Count","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2537","format":"short","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2538","format":"short","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":31},"id":68,"panels":[],"title":"System - $instance","type":"row"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"$DS_PROMETHEUS","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":12,"x":0,"y":32},"height":"","id":12,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"sum(node_memory_MemTotal_bytes{app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\"})","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"","metric":"","refId":"A","step":1800}],"thresholds":"","title":"Total Memory","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"$DS_PROMETHEUS","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":12,"x":12,"y":32},"height":"","id":13,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"sum(node_memory_MemFree_bytes{app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\"})","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"","refId":"A","step":1800}],"thresholds":"","title":"Total Memory Free","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":12,"x":0,"y":35},"hiddenSeries":false,"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(elasticsearch_thread_pool_active_count{app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\", type!=\"management\"}) by (type)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Type: {{ type }}","refId":"A","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Thread Pools","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2892","format":"short","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2893","format":"short","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":12,"x":12,"y":35},"hiddenSeries":false,"id":66,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(elasticsearch_thread_pool_rejected_count{app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\", type!=\"management\"}[5m])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{ name }} {{ type }}","refId":"A","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Thread pool rejections","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2971","format":"short","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2972","format":"short","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":43},"hiddenSeries":false,"id":57,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":false},"percentage":true,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"$$hashKey":"object:3159"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"bucketAggs":[{"id":"2","settings":{"interval":"auto"},"type":"date_histogram"}],"dsType":"elasticsearch","expr":"avg(rate(node_cpu_seconds_total{app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\", mode!=\"idle\"}[5m])) by(mode)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{mode}}","metric":"elasticsearch_breakers_tripped","metrics":[{"id":"1","type":"count"}],"refId":"A","step":240,"timeField":"failure_tstamp"},{"expr":"avg(rate(node_cpu_seconds_total{app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\", mode=\"idle\"}[5m])) by(mode)","interval":"","legendFormat":"{{mode}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Avg. CPU Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3050","decimals":null,"format":"percentunit","label":"","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:3051","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":12,"x":12,"y":43},"hiddenSeries":false,"id":28,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg_over_time(elasticsearch_jvm_memory_used_bytes{area=\"heap\",app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\"}[15m]) / elasticsearch_jvm_memory_max_bytes{area=\"heap\",app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\"}","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{ instance }}","refId":"A","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Avg Heap","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3215","format":"percentunit","label":"","logBase":1,"max":1,"min":0,"show":true},{"$$hashKey":"object:3216","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","description":"","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":12,"x":0,"y":51},"hiddenSeries":false,"id":5,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"$$hashKey":"object:3591","alias":"TX","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(elasticsearch_transport_rx_packets_total{app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\"}[5m]))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"RX","refId":"A","step":240},{"expr":"sum(rate(elasticsearch_transport_tx_packets_total{app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\"}[5m]))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"TX","refId":"B","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"RX/TX Packets/s","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3561","format":"cps","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:3562","format":"short","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$DS_PROMETHEUS","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":12,"x":12,"y":51},"hiddenSeries":false,"id":65,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum by (instance, gc) (irate(elasticsearch_jvm_gc_collection_seconds_sum{app_mintel_com_job_label=~\"$job_label\", app_mintel_com_site=\"$site\", instance=~\"$instance\"}[5m]))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{ instance }} {{ gc }}","refId":"A","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"GC seconds","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3736","format":"short","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:3737","format":"short","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"1m","schemaVersion":26,"style":"dark","tags":["infra","b2c","elastic"],"templating":{"list":[{"current":{"selected":false,"text":"cortex-onprem-prod","value":"cortex-onprem-prod"},"error":null,"hide":0,"includeAll":false,"label":null,"multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","queryValue":"","refresh":1,"regex":"cortex-onprem-.*","skipUrlSync":false,"type":"datasource"},{"allValue":null,"current":{"selected":false,"text":"lon-dc","value":"lon-dc"},"datasource":"$DS_PROMETHEUS","definition":"label_values(elasticsearch_node_stats_up,app_mintel_com_site)","error":null,"hide":0,"includeAll":false,"label":"Site","multi":false,"name":"site","options":[],"query":"label_values(elasticsearch_node_stats_up,app_mintel_com_site)","refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":false,"text":"infra-elk-es-master01.lon-dc.mintel.ad","value":"infra-elk-es-master01.lon-dc.mintel.ad"},"datasource":"$DS_PROMETHEUS","definition":"query_result(topk(1,elasticsearch_nodes_roles{role=\"master\",app_mintel_com_site=\"$site\"}))","error":null,"hide":2,"includeAll":false,"label":"any_master","multi":false,"name":"any_master","options":[],"query":"query_result(topk(1,elasticsearch_nodes_roles{role=\"master\",app_mintel_com_site=\"$site\"}))","refresh":2,"regex":"/.*instance=\"([^\"]*).*/","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":false,"text":"All","value":"$__all"},"datasource":"$DS_PROMETHEUS","definition":"label_values(elasticsearch_node_stats_up, app_mintel_com_job_label)","error":null,"hide":0,"includeAll":true,"label":null,"multi":false,"name":"job_label","options":[],"query":"label_values(elasticsearch_node_stats_up, app_mintel_com_job_label)","refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":false,"text":"All","value":"$__all"},"datasource":"$DS_PROMETHEUS","definition":"label_values(elasticsearch_node_stats_up{app_mintel_com_job_label=~\"$job_label\",app_mintel_com_site=\"$site\"},instance)","error":null,"hide":0,"includeAll":true,"label":"Instance","multi":false,"name":"instance","options":[],"query":"label_values(elasticsearch_node_stats_up{app_mintel_com_job_label=~\"$job_label\",app_mintel_com_site=\"$site\"},instance)","refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-24h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"utc","title":"On-prem Elasticsearch Stats","uid":"654bac1d374b5905ece9c00216ea5b5c","version":7}
